<odoo>
  <data>

    <!-- Form view utama -->
    <record id="view_product_inherit_custom_form" model="ir.ui.view">
      <field name="name">product.template.form</field>
      <field name="model">product.template</field>
      <field name="inherit_id" ref="product.product_template_form_view"/>
      <field name="arch" type="xml">
        <xpath expr="//field[@name='categ_id']" position="after">
            <field name="vit_sub_div" readonly="1"/>
            <field name="vit_item_kel" readonly="1"/>
            <field name="vit_item_type" readonly="1"/>
            <field name="brand" readonly="1"/>
        </xpath>
        
        <!-- Tambahkan field baru setelah product_tag_ids -->
        <xpath expr="//field[@name='product_tag_ids']" position="after">
            <field name="is_integrated" readonly="1"/>
            <field name="vit_is_discount"/>
            <field name="index_store" widget="many2many_tags"/>
        </xpath>
        
        <!-- Field-field utama yang readonly -->
        <field name="categ_id" position="attributes">
          <attribute name="readonly">1</attribute>
        </field>
        <field name="standard_price" position="attributes">
          <attribute name="readonly">1</attribute>
        </field>
        <field name="sale_ok" position="attributes">
          <attribute name="readonly">1</attribute>
        </field>
        <field name="purchase_ok" position="attributes">
          <attribute name="readonly">1</attribute>
        </field>
        <field name="taxes_id" position="attributes">
          <attribute name="readonly">1</attribute>
        </field>
        <field name="detailed_type" position="attributes">
          <attribute name="readonly">1</attribute>
        </field>
        <field name="invoice_policy" position="attributes">
          <attribute name="readonly">1</attribute>
        </field>
        <field name="uom_id" position="attributes">
          <attribute name="readonly">1</attribute>
        </field>
        <field name="uom_po_id" position="attributes">
          <attribute name="readonly">1</attribute>
        </field>
        
        <!-- Field yang bisa diubah dan log ke chatter -->
        <field name="list_price" position="attributes">
          <attribute name="force_save">1</attribute>
        </field>
        <field name="product_tag_ids" position="attributes">
          <attribute name="force_save">1</attribute>
        </field>
        <field name="brand" position="attributes">
          <attribute name="force_save">1</attribute>
        </field>
        <field name="vit_is_discount" position="attributes">
          <attribute name="force_save">1</attribute>
        </field>
        <field name="index_store" position="attributes">
          <attribute name="force_save">1</attribute>
        </field>
        
        <xpath expr="//page[@name='invoicing']" position="after">
            <page string="Barcodes">
                <field name="multi_barcode_ids">
                    <tree editable="bottom">
                        <field name="barcode"/>
                    </tree>
                </field>
            </page>
        </xpath>
      </field>
    </record>

    <!-- Form view untuk template only (untuk handle default_code) -->
    <record id="view_product_inherit_custom_form_only" model="ir.ui.view">
      <field name="name">product.template.only.form</field>
      <field name="model">product.template</field>
      <field name="inherit_id" ref="product.product_template_only_form_view"/>
      <field name="arch" type="xml">
        <xpath expr="//field[@name='default_code']" position="attributes">
          <attribute name="readonly">1</attribute>
        </xpath>
        <xpath expr="//field[@name='barcode']" position="attributes">
          <attribute name="readonly">1</attribute>
        </xpath>
      </field>
    </record>

  </data>
</odoo>