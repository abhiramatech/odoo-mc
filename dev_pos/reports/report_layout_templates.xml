<odoo>
  <template id="report_sales_detail" name="Report Sales Detail">
    <t t-set="company" t-value="env.company"/>
    <t t-call="web.html_container">
      <t t-set="o" t-value="res_company"/>
      <t t-call="web.external_layout">
        <div class="page">
          <h4 class="text-center"><b>PT KEMANG KARSA</b></h4>
          <h5 class="text-center">Laporan Penjualan</h5>
          <p class="text-center">[ <t t-esc="date_from"/> - <t t-esc="date_to"/> ]</p>

          <table class="table table-bordered table-sm">
            <thead class="table-secondary">
              <tr>
                <th>No</th>
                <th>Nomor Faktur</th>
                <th>Nomor Order</th>
                <th>Session</th>
                <th>Lokasi</th>
                <th>Tanggal</th>
                <th>Jatuh Tempo</th>
                <th>Customer</th>
              </tr>
            </thead>
            <tbody>
              <t t-set="counter" t-value="1"/>
              <t t-foreach="orders" t-as="order">
                <tr>
                  <td><t t-esc="counter"/></td>
                  <td><t t-esc="order.account_move.name or ''"/></td>
                  <td><t t-esc="order.name or ''"/></td>
                  <td><t t-esc="order.session_id.name or ''"/></td>
                  <td><t t-esc="order.config_id.name"/></td>
                  <td><t t-esc="order.date_order.strftime('%d/%m/%Y %H:%M')"/></td>
                  <td><t t-esc="order.date_order.strftime('%d/%m/%Y')"/></td>
                  <td><t t-esc="order.partner_id.name or ''"/></td>
                </tr>

                <!-- Detail Produk -->
                <tr>
                  <td></td>
                  <td colspan="6">
                    <table class="table table-bordered table-sm mb-0">
                      <thead>
                        <tr class="table-light">
                          <th>Produk</th>
                          <th>Qty</th>
                          <th>Harga</th>
                          <th>Disc %</th>
                          <th>Subtotal</th>
                        </tr>
                      </thead>
                      <tbody>
                        <t t-foreach="order.lines" t-as="line">
                          <tr>
                            <td><t t-esc="line.product_id.display_name"/></td>
                            <td class="text-end"><t t-esc="line.qty"/></td>
                            <td class="text-end"><t t-esc="line.price_unit"/></td>
                            <td class="text-end"><t t-esc="line.discount"/></td>
                            <td class="text-end"><t t-esc="line.price_subtotal_incl"/></td>
                          </tr>
                        </t>
                        <tr>
                          <td colspan="4" class="text-end"><b>Total</b></td>
                          <td class="text-end"><b><t t-esc="order.amount_total"/></b></td>
                        </tr>
                      </tbody>
                    </table>
                  </td>
                </tr>
                <t t-set="counter" t-value="counter + 1"/>
              </t>
            </tbody>
          </table>
        </div>
      </t>
    </t>
  </template>

  <template id="report_sales_recap" name="Report Sales Recap">
    <t t-call="web.html_container">
      <div class="container mt-4">
        <h4 class="text-center"><b>PT KEMANG KARSA</b></h4>
        <h5 class="text-center">Laporan Penjualan</h5>
        <p class="text-center">[ <t t-esc="date_from"/> - <t t-esc="date_to"/> ]</p>

        <table class="table table-bordered table-sm">
          <thead class="table-secondary">
            <tr>
              <th>No</th>
              <th>Nomor Faktur</th>
              <th>Nomor Order</th>
              <th>Session</th>
              <th>Lokasi</th>
              <th>Tanggal</th>
              <th>Customer</th>
              <th>Quantity</th>
              <th>Nominal</th>
            </tr>
          </thead>
          <tbody>
            <t t-set="counter" t-value="1"/>
            <t t-foreach="orders" t-as="order">
              <tr>
                <td><t t-esc="counter"/></td>
                <td><t t-esc="order.account_move.name or ''"/></td>
                <td><t t-esc="order.name or ''"/></td>
                <td><t t-esc="order.session_id.name or ''"/></td>
                <td><t t-esc="order.config_id.name"/></td>
                <td><t t-esc="order.date_order.strftime('%d/%m/%Y %H:%M')"/></td>
                <td><t t-esc="order.partner_id.name or ''"/></td>
                <td><t t-esc="sum(order.lines.mapped('qty') or [0])"/></td>
                <td><t t-esc="sum(order.lines.mapped('price_subtotal_incl') or [0])"/></td>
              </tr>
              <t t-set="counter" t-value="counter + 1"/>
            </t>
          </tbody>
        </table>
      </div>
    </t>
  </template>

  <template id="report_sales_spending" name="Report Sales Spending">
    <t t-call="web.html_container">
      <style>
        .page {
          margin-bottom: 40px;
          page-break-after: always;
        }
        @media print {
          thead { display: table-header-group; }
          tfoot { display: table-footer-group; }
          tr { page-break-inside: avoid; }
        }
        /* Scroll horizontal di web */
        .table-responsive {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }
      </style>

      <div class="container mt-4">
        <h4 class="text-center"><b>PT KEMANG KARSA</b></h4>
        <h5 class="text-center">Laporan History Penjualan By Store</h5>
        <p class="text-center">[ <t t-esc="date_from"/> - <t t-esc="date_to"/> ]</p>

        <t t-set="rows_per_page" t-value="20"/>
        <t t-set="pages" t-value="[]"/>
        <t t-set="page" t-value="[]"/>

        <t t-foreach="data_rows" t-as="row">
          <t t-if="len(page) &lt; rows_per_page">
            <t t-set="page" t-value="page + [row]"/>
          </t>
          <t t-else="">
            <t t-set="pages" t-value="pages + [page]"/>
            <t t-set="page" t-value="[row]"/>
          </t>
        </t>
        <t t-if="page">
          <t t-set="pages" t-value="pages + [page]"/>
        </t>

        <!-- Loop halaman -->
        <t t-foreach="pages" t-as="p">
          <div class="page">
            <div class="table-responsive">
              <table class="table table-bordered table-sm text-center" style="font-size:12px; min-width: 1200px;">
                <thead style="background-color: #ffd700; font-weight: bold;">
                  <tr>
                    <th>Nomor</th>
                    <th>Nama</th>
                    <t t-foreach="tanggal_list" t-as="tgl">
                      <th>Qty-<t t-esc="tgl.strftime('%d/%m/%Y')"/></th>
                      <th>Trx-<t t-esc="tgl.strftime('%d/%m/%Y')"/></th>
                      <th>Sales-<t t-esc="tgl.strftime('%d/%m/%Y')"/></th>
                    </t>
                  </tr>
                </thead>
                <tbody>
                  <t t-set="counter" t-value="1"/>
                  <t t-foreach="p" t-as="row">
                    <tr>
                      <td><t t-esc="counter"/></td>
                      <td><t t-esc="row['label']"/></td>
                      <t t-foreach="tanggal_list" t-as="tgl">
                        <td><t t-esc="row.get(tgl.strftime('%d/%m/%Y') + '_qty', '')"/></td>
                        <td><t t-esc="row.get(tgl.strftime('%d/%m/%Y') + '_trx', '')"/></td>
                        <td><t t-esc="row.get(tgl.strftime('%d/%m/%Y') + '_sales', '')"/></td>
                      </t>
                    </tr>
                    <t t-set="counter" t-value="counter + 1"/>
                  </t>
                </tbody>
              </table>
            </div>
          </div>
        </t>
      </div>
    </t>
  </template>

  <template id="report_sales_hourly" name="Report Sales Hourly">
    <t t-call="web.html_container">
      <div class="container mt-4">
        <h4 class="text-center"><b>PT KEMANG KARSA</b></h4>
        <h5 class="text-center">Laporan History Penjualan By Store</h5>
        <p class="text-center">[ <t t-esc="date_from"/> - <t t-esc="date_to"/> ]</p>

        <t t-set="cols_per_page" t-value="10"/>
        <t t-set="tanggal_chunks" t-value="[tanggal_list[i:i+cols_per_page] for i in range(0, len(tanggal_list), cols_per_page)]"/>

        <t t-foreach="tanggal_chunks" t-as="chunk">
          <div class="page">
            <div class="table-responsive">
              <table class="table table-bordered table-sm text-center" style="font-size:12px; min-width: 1200px;">
                <thead style="background-color: #ffd700; font-weight: bold;">
                  <tr>
                    <th>Jam</th>
                    <t t-foreach="chunk" t-as="tgl">
                      <th>Qty-<t t-esc="tgl.strftime('%d/%m/%Y')"/></th>
                      <th>Trx-<t t-esc="tgl.strftime('%d/%m/%Y')"/></th>
                      <th>Sales-<t t-esc="tgl.strftime('%d/%m/%Y')"/></th>
                    </t>
                  </tr>
                </thead>
                <tbody>
                  <t t-set="counter" t-value="1"/>
                  <t t-foreach="data_rows" t-as="row">
                    <tr>
                      <td><t t-esc="counter"/></td>
                      <t t-foreach="chunk" t-as="tgl">
                        <td><t t-esc="row.get(tgl.strftime('%d/%m/%Y') + '_qty', '')"/></td>
                        <td><t t-esc="row.get(tgl.strftime('%d/%m/%Y') + '_trx', '')"/></td>
                        <td><t t-esc="row.get(tgl.strftime('%d/%m/%Y') + '_sales', '')"/></td>
                      </t>
                    </tr>
                    <t t-set="counter" t-value="counter + 1"/>
                  </t>
                </tbody>
              </table>
            </div>
          </div>
        </t>
      </div>
    </t>
  </template>

  <template id="report_sales_hourly_category" name="Report Sales Hourly Category">
    <t t-call="web.html_container">
      <div class="container mt-4">
        <h4 class="text-center"><b>PT KEMANG KARSA</b></h4>
        <h5 class="text-center">Laporan History Penjualan By Store</h5>
        <p class="text-center">[ <t t-esc="date_from"/> - <t t-esc="date_to"/> ]</p>

        <t t-set="cols_per_page" t-value="10"/>
        <t t-set="tanggal_chunks" t-value="[tanggal_list[i:i+cols_per_page] for i in range(0, len(tanggal_list), cols_per_page)]"/>

        <t t-foreach="tanggal_chunks" t-as="chunk">
          <div class="page">
            <div class="table-responsive">
              <table class="table table-bordered table-sm text-center" style="font-size:12px; min-width: 1200px;">
                <thead style="background-color: #ffd700; font-weight: bold;">
                  <tr>
                    <th>Kategori</th>
                    <t t-foreach="jam_list" t-as="jam">
                      <th>Qty-<t t-esc="jam"/></th>
                      <th>Trx-<t t-esc="jam"/></th>
                      <th>Sales-<t t-esc="jam"/></th>
                    </t>
                  </tr>
                </thead>
                <tbody>
                  <t t-foreach="data_rows" t-as="row">
                    <tr>
                      <td><t t-esc="row['kategori']"/></td>
                      <t t-foreach="jam_list" t-as="jam">
                        <td><t t-esc="row.get(jam+'_qty', '')"/></td>
                        <td><t t-esc="row.get(jam+'_trx', '')"/></td>
                        <td><t t-esc="row.get(jam+'_sales', '')"/></td>
                      </t>
                    </tr>
                  </t>
                </tbody>
              </table>
            </div>
          </div>
        </t>
      </div>
    </t>
  </template>

  <!-- <template id="report_sales_hourly_payment" name="Report Sales Hourly Payment">
    <t t-call="web.html_container">
      <div class="container mt-4">
        <h4 class="text-center"><b>PT KEMANG KARSA</b></h4>
        <h5 class="text-center">Laporan History Penjualan By Store</h5>
        <p class="text-center">[ <t t-esc="date_from"/> - <t t-esc="date_to"/> ]</p>

        <t t-set="cols_per_page" t-value="10"/>
        <t t-set="tanggal_chunks" t-value="[tanggal_list[i:i+cols_per_page] for i in range(0, len(tanggal_list), cols_per_page)]"/>

        <t t-foreach="tanggal_chunks" t-as="chunk">
          <div class="page">
            <div class="table-responsive">
              <table class="table table-bordered table-sm text-center" style="font-size:12px; min-width: 1200px;">
                <thead style="background-color: #ffd700; font-weight: bold;">
                  <tr>
                    <th>Kategori</th>
                    <t t-foreach="jam_list" t-as="jam">
                      <th>Qty-<t t-esc="jam"/></th>
                      <th>Trx-<t t-esc="jam"/></th>
                      <th>Sales-<t t-esc="jam"/></th>
                    </t>
                  </tr>
                </thead>
                <tbody>
                  <t t-foreach="data_rows" t-as="row">
                    <tr>
                      <td><t t-esc="row['kategori']"/></td>
                      <t t-foreach="jam_list" t-as="jam">
                        <td><t t-esc="row.get(jam+'_qty', '')"/></td>
                        <td><t t-esc="row.get(jam+'_trx', '')"/></td>
                        <td><t t-esc="row.get(jam+'_sales', '')"/></td>
                      </t>
                    </tr>
                  </t>
                </tbody>
          </table>
        </div>
      </div>
    </t>
  </template> -->

</odoo>
